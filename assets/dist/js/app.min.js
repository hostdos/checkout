var vm=new Vue({el:"#app",ready:function(){this.getArticles(),this.getGroups()},data:{baseUrl:"http://46.101.209.111",articles:[],groups:[],orderArticles:[],activeGroup:null,amountGiven:"",displayStatusbar:!1,statusbarText:"",statusbarError:!1,filters:{active:function(t){return t.groupId===vm.$data.activeGroup.id?t:void 0}}},computed:{amountToReturn:function(){var t=+this.amountGiven-this.totalPrice;return 0>t?0:t},activeGroupArticles:function(){return null!==this.activeGroup?this.articles.filter(this.filters.active):this.articles},totalPrice:function(){var t=0;return this.orderArticles.forEach(function(r){t+=+r.article.price}),t}},methods:{getArticles:function(){this.$http.get(this.baseUrl+"/articles",function(t,r,e){this.$set("articles",t)},{error:function(t,r,e){this.showStatusbar("Error: No connection to server - "+r,!0)}})},getGroups:function(){this.$http.get(this.baseUrl+"/groups",function(t,r,e){this.$set("groups",t)},{error:function(t,r,e){this.showStatusbar("Error: No connection to server - "+r,!0)}})},makeOrder:function(){var t=[];this.orderArticles.forEach(function(r){t.push(+r.article.id)}),t={article:t};var r=new XMLHttpRequest,e=this;r.open("POST",this.baseUrl+"/orders"),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.onload=function(){e.showStatusbar("Order successful"),e.clearOrder(),e.clearGiven(),window.print()},r.onerror=function(){e.showStatusbar("Error: No connection to server - "+status,!0)},r.send(JSON.stringify(t))},clearOrder:function(){this.orderArticles=[],this.clearGiven()},addArticleToOrder:function(t){this.orderArticles.push({article:t})},setActiveGroup:function(t){this.activeGroup=t},addToGiven:function(t){this.amountGiven+=t},clearGiven:function(){this.amountGiven=""},removeOrderArticle:function(t){this.orderArticles.$remove(t)},showStatusbar:function(t,r){r&&(this.statusbarError=!0),this.statusbarText=t,this.displayStatusbar=!0,r||setTimeout(this.hideStatusbar,2e3)},hideStatusbar:function(){this.displayStatusbar=!1,this.statusbarError=!1}}});